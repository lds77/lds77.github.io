<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶©ì²­ë¶ë„ ëŒ€ê·œëª¨ í–‰ì‚¬ ì¸í„°ë™í‹°ë¸Œ ëŒ€ì‹œë³´ë“œ (2025ë…„ í•˜ë°˜ê¸°)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Stone, White, Muted Blue/Teal) -->
    <!-- Application Structure Plan: A dashboard-centric single-page application. The structure prioritizes user-driven exploration over the linear format of the source report. It starts with high-level KPIs for a quick summary. The core interaction is a visual filter system using a simplified clickable map of Chungcheongbuk-do regions and a monthly timeline, allowing users to intuitively drill down into the event data. Filtered results are shown as clean, modern cards. This is followed by summary charts (events by region, month, and type) for data synthesis from different angles. Finally, detailed legal text is placed in an accordion to keep the main interface clean. This structure was chosen because it empowers different user types (officials, planners, public) to access the specific information they need quickly and visually, transforming a static report into an interactive planning tool. -->
    <!-- Visualization & Content Choices: 
- Event Data: Report Table -> Goal: Organize/Filter -> Viz: Interactive map/timeline + dynamic cards (HTML/CSS/JS) -> Interaction: Click filters to update list -> Justification: More engaging and user-directed than a static table.
- Events per Region: Report Data -> Goal: Compare -> Viz: Bar Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: Standard, clear method for comparing counts across categories (regions).
- Events per Month: Report Data -> Goal: Compare/Show Change -> Viz: Bar Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: Clearly visualizes the temporal distribution of events for planning.
- Event Categories: Derived from Report Notes -> Goal: Show Proportions -> Viz: Donut Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: Effectively shows the mix of event types at a glance.
- Legal Context: Report Text -> Goal: Inform (on-demand) -> Viz: Collapsible Accordion (HTML/JS) -> Interaction: Click to show/hide -> Justification: Hides dense text to maintain a clean UI, providing deep context without overwhelming the user initially.
-->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F9FA; /* Light gray background */
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .map-region, .timeline-month {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .map-region.active, .timeline-month.active {
            border-color: #3B82F6; /* Blue-500 */
            background-color: #DBEAFE; /* Blue-100 */
            font-weight: bold;
            color: #1E40AF; /* Blue-800 */
        }
         .map-region:not(.active):hover {
            background-color: #E5E7EB; /* Gray-200 */
        }
        .timeline-month:not(.active):hover {
             background-color: #E5E7EB; /* Gray-200 */
        }
        .event-card {
            transition: box-shadow 0.3s ease;
        }
        .event-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .accordion-header {
            cursor: pointer;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 350px;
            max-height: 400px;
            width: 100%;
            max-width: 500px;
        }
    </style>
</head>
<body class="bg-stone-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-2">ì¶©ë¶ ëŒ€ê·œëª¨ í–‰ì‚¬ ì•ˆì „ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>
            <p class="text-lg md:text-xl text-gray-600">2025ë…„ í•˜ë°˜ê¸° ì‘ê¸‰ì˜ë£Œ ì§€ì› ì˜ë¬´ ëŒ€ìƒ í–‰ì‚¬ í˜„í™©</p>
        </header>

        <section id="kpi-section" class="mb-8 md:mb-12">
            <p class="text-center text-gray-600 mb-6">ì•„ë˜ëŠ” ë³´ê³ ì„œì˜ ì£¼ìš” ë°ì´í„°ë¥¼ ìš”ì•½í•œ ì§€í‘œì…ë‹ˆë‹¤. ê° ì¹´ë“œëŠ” ì „ì²´ì ì¸ í˜„í™©ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
                <div id="kpi-total-events" class="kpi-card p-6 text-center"></div>
                <div id="kpi-total-cities" class="kpi-card p-6 text-center"></div>
                <div id="kpi-largest-event" class="kpi-card p-6 text-center"></div>
                <div id="kpi-busiest-month" class="kpi-card p-6 text-center"></div>
            </div>
        </section>

        <section class="bg-white p-6 rounded-xl shadow-lg mb-8 md:mb-12">
            <h2 class="text-2xl font-bold text-center mb-4">ì¸í„°ë™í‹°ë¸Œ í–‰ì‚¬ í•„í„°</h2>
            <p class="text-center text-gray-600 mb-6">ì§€ë„ì—ì„œ ì›í•˜ëŠ” ì§€ì—­ì„, íƒ€ì„ë¼ì¸ì—ì„œ ì›í•˜ëŠ” ì›”ì„ ì„ íƒí•˜ì—¬ ì•„ë˜ í–‰ì‚¬ ëª©ë¡ì„ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1">
                    <h3 class="font-bold text-lg mb-4 text-center">ì§€ì—­ë³„ í•„í„°</h3>
                    <div id="map-container" class="grid grid-cols-3 gap-2 p-2 bg-gray-50 rounded-lg">
                        <!-- Regions will be injected by JS -->
                    </div>
                </div>
                <div class="lg:col-span-2">
                    <h3 class="font-bold text-lg mb-4 text-center">ê¸°ê°„ë³„ í•„í„°</h3>
                    <div id="timeline-container" class="grid grid-cols-3 md:grid-cols-6 gap-2 p-2 bg-gray-50 rounded-lg">
                        <!-- Months will be injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <section id="event-list-section" class="mb-8 md:mb-12">
            <h2 class="text-2xl font-bold mb-6 text-center">í–‰ì‚¬ ëª©ë¡ (<span id="event-count"></span>ê°œ)</h2>
            <div id="event-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Event cards will be injected by JS -->
            </div>
             <div id="no-results" class="text-center py-12 text-gray-500 text-xl hidden">
                <p>ì„ íƒí•œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” í–‰ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
        </section>
        
        <section class="bg-white p-6 rounded-xl shadow-lg mb-8 md:mb-12">
            <h2 class="text-2xl font-bold text-center mb-4">ë°ì´í„° ì‹œê°í™”</h2>
            <p class="text-center text-gray-600 mb-8">ì „ì²´ í–‰ì‚¬ ë°ì´í„°ë¥¼ ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ì‹œê°ì ìœ¼ë¡œ ë¶„ì„í•œ ì°¨íŠ¸ì…ë‹ˆë‹¤. ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h3 class="font-bold text-lg mb-4 text-center">ì§€ì—­ë³„ í–‰ì‚¬ ë¶„í¬</h3>
                    <div class="chart-container"><canvas id="eventsByCityChart"></canvas></div>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4 text-center">ì›”ë³„ í–‰ì‚¬ ë¶„í¬</h3>
                     <div class="chart-container"><canvas id="eventsByMonthChart"></canvas></div>
                </div>
                <div class="lg:col-span-2">
                    <h3 class="font-bold text-lg mt-8 mb-4 text-center">í–‰ì‚¬ ìœ í˜•ë³„ ë¶„í¬</h3>
                    <div class="chart-container h-80 max-h-[350px] max-w-md"><canvas id="eventsByTypeChart"></canvas></div>
                </div>
            </div>
        </section>

        <section id="legal-section" class="bg-white p-6 rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold text-center mb-6">ë²•ì  ê·¼ê±° ë° ê¶Œê³ ì‚¬í•­</h2>
             <div class="space-y-4">
                <div class="accordion-item border rounded-lg">
                    <div class="accordion-header p-4 flex justify-between items-center bg-gray-50">
                        <h3 class="font-bold text-lg">ëŒ€ê·œëª¨ í–‰ì‚¬ ì‘ê¸‰ì˜ë£Œ ë²•ì  ì²´ê³„</h3>
                        <span class="transform transition-transform duration-300">â–¼</span>
                    </div>
                    <div class="accordion-content p-4 border-t">
                        <p class="mb-4">ëŒ€ê·œëª¨ í–‰ì‚¬ì—ì„œì˜ ì‘ê¸‰ ì˜ë£Œ ì„œë¹„ìŠ¤ í™•ë³´ ì˜ë¬´ëŠ” <strong>ì‘ê¸‰ì˜ë£Œì— ê´€í•œ ë²•ë¥ </strong>ì— ë”°ë¼ ëª…í™•íˆ ê·œì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>ë²•ë¥  ì œ54ì¡°ì˜3:</strong> ëŒ€ê·œëª¨ í–‰ì‚¬ ê°œìµœìëŠ” ì‘ê¸‰í™˜ì ë°œìƒ ì‹œ ì‹ ì†í•œ ì˜ë£Œë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ì‘ê¸‰ì˜ë£Œ ì¸ë ¥ ë° ì´ì†¡ìˆ˜ë‹¨ì„ í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                            <li><strong>ì‹œí–‰ë ¹ ì œ27ì¡°ì˜3:</strong> 'ëŒ€ê·œëª¨ í–‰ì‚¬'ë€ <strong>1,000ëª… ì´ìƒ</strong>ì´ ì°¸ì—¬í•˜ëŠ” í–‰ì‚¬ë¡œ ì •ì˜ë©ë‹ˆë‹¤. ì´ê²ƒì´ ë²•ì  ì˜ë¬´ê°€ ë°œìƒí•˜ëŠ” í•µì‹¬ ê¸°ì¤€ì…ë‹ˆë‹¤.</li>
                            <li><strong>ì‹œí–‰ê·œì¹™ ì œ44ì¡°ì˜2:</strong> ì£¼ìµœìëŠ” <strong>ì‘ê¸‰êµ¬ì¡°ì‚¬, ì˜ì‚¬ ë˜ëŠ” ê°„í˜¸ì‚¬ 1ëª…ê³¼ êµ¬ê¸‰ì°¨ 1ëŒ€</strong>ë¥¼ ë°˜ë“œì‹œ í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                </div>
                <div class="accordion-item border rounded-lg">
                    <div class="accordion-header p-4 flex justify-between items-center bg-gray-50">
                        <h3 class="font-bold text-lg">í–‰ì‚¬ ì£¼ìµœìì˜ ì±…ì„ ë° ê¶Œê³ ì‚¬í•­</h3>
                        <span class="transform transition-transform duration-300">â–¼</span>
                    </div>
                    <div class="accordion-content p-4 border-t">
                        <p class="mb-4">ì„±ê³µì ì¸ í–‰ì‚¬ì™€ ê³µì¤‘ ì•ˆì „ì„ ìœ„í•´ ì£¼ìµœìëŠ” ë‹¤ìŒ ì‚¬í•­ì„ ì¤€ìˆ˜í•  ê²ƒì„ ê¶Œê³ í•©ë‹ˆë‹¤.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li><strong>ì² ì €í•œ ì‚¬ì „ ê³„íš:</strong> ì˜ˆìƒ ë°©ë¬¸ê° ìˆ˜ë¥¼ ë©´ë°€íˆ í‰ê°€í•˜ê³ , 1,000ëª… ê¸°ì¤€ ì´ˆê³¼ ì‹œ ë²•ì  ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì˜ë£Œ ìì›ì„ ì‚¬ì „ì— í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                            <li><strong>ë™ì  êµ°ì¤‘ ê´€ë¦¬:</strong> ì˜ˆìƒì¹˜ ëª»í•œ ë°©ë¬¸ê° ì¦ê°€ì— ëŒ€ë¹„í•œ ìœ ì—°í•œ ë¹„ìƒ ê³„íšì„ ìˆ˜ë¦½í•˜ê³ , íŠ¹íˆ ì¥ê¸° í–‰ì‚¬ëŠ” ì§€ì†ì ì¸ ìš´ì˜ ëª¨ë¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
                            <li><strong>ë‹¤ê¸°ê´€ í˜‘ë ¥ ê°•í™”:</strong> ì§€ìì²´, ì†Œë°©ì„œ, ë³‘ì› ë“± ê´€ë ¨ ê¸°ê´€ê³¼ ê¸´ë°€í•œ í˜‘ë ¥ ì²´ê³„ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‘ê¸‰ ìƒí™©ì— ì‹ ì†íˆ ëŒ€ì‘í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                            <li><strong>ì •ë³´ íˆ¬ëª…ì„± í™•ë³´:</strong> ë°©ë¬¸ê°ì—ê²Œ ì‘ê¸‰ ì˜ë£Œ ê´€ë ¨ ì •ë³´ë¥¼ ëª…í™•íˆ ì•ˆë‚´í•˜ì—¬ ë¹„ìƒì‹œ í˜‘ì¡°ë¥¼ ìœ ë„í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center mt-12 text-gray-500">
            <p>ë°ì´í„° ì¶œì²˜: ì¶©ì²­ë¶ë„ ëŒ€ê·œëª¨ ì§€ì—­ í–‰ì‚¬ ë° ì¶•ì œ ì‘ê¸‰ì˜ë£Œ ì§€ì› ì˜ë¬´ í˜„í™© ë³´ê³ ì„œ (2025ë…„ í•˜ë°˜ê¸°)</p>
            <p>ë³¸ ëŒ€ì‹œë³´ë“œëŠ” ì œê³µëœ ë³´ê³ ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì œì‘ëœ ì¸í„°ë™í‹°ë¸Œ ì‹œê°í™” ìë£Œì…ë‹ˆë‹¤.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const eventData = [
                { region: 'ì¶©ì£¼ì‹œ', name: 'ì œ64íšŒ ì „êµ­ë‚¨ë…€ì¢…ë³„íœì‹±ì„ ìˆ˜ê¶ŒëŒ€íšŒ ë° ì½”ë¦¬ì•„ì˜¤í”ˆëŒ€íšŒ', date: '2025. 7. 3. ~ 7. 13.', visitors: 'ìˆ˜ì²œ ëª… ì´ìƒ', reason: 'ì „êµ­ ê·œëª¨ì˜ ìŠ¤í¬ì¸  ëŒ€íšŒë¡œ 1,000ëª… ê¸°ì¤€ ëª…ë°±íˆ ì´ˆê³¼', type: 'ìŠ¤í¬ì¸ ' },
                { region: 'ë‹¨ì–‘êµ°', name: '2025 ë‹¨ì–‘ê°• ì „êµ­ ìŠ¤í¬ì¸  í”¼ì‹±ëŒ€íšŒ', date: '2025. 7. 5. ~ 7. 6.', visitors: 'ìˆ˜ì²œ ëª… ì´ìƒ', reason: 'ì „êµ­ ê°ì§€ì—ì„œ ì°¸ê°€ìë¥¼ ìœ ì¹˜í•˜ëŠ” ëŒ€ê·œëª¨ ë ˆì € í–‰ì‚¬', type: 'ìŠ¤í¬ì¸ ' },
                { region: 'ì˜ë™êµ°', name: 'ì˜ë™ ë¸”ë£¨ë² ë¦¬ ì¶•ì œ', date: '2025. 7. 5. ê°œë§‰', visitors: 'ìˆ˜ì²œ ëª… ì´ìƒ', reason: 'ì²´í—˜, ë¨¹ê±°ë¦¬, ê³µì—°ì„ í¬í•¨í•˜ëŠ” ëŒ€ê·œëª¨ ë†ì´Œ í˜ìŠ¤í‹°ë²Œ', type: 'ì¶•ì œ' },
                { region: 'ì˜ë™êµ°', name: 'ìœ„ë”ìŠ¤ì œì•½ 2025 ë¯¼ì†ì”¨ë¦„ ì˜ë™ì„¸ê³„êµ­ì•…ì—‘ìŠ¤í¬ ì¥ì‚¬ì”¨ë¦„ëŒ€íšŒ', date: '2025. 8. 1.', visitors: 'ìˆ˜ì²œ ëª… ì´ìƒ', reason: 'ì—‘ìŠ¤í¬ì™€ ì—°ê³„ëœ ëŒ€ê·œëª¨ ë¯¼ì†ì”¨ë¦„ ëŒ€íšŒ', type: 'ìŠ¤í¬ì¸ ' },
                { region: 'ì˜ë™êµ°', name: 'ì œ61íšŒ ì–‘ì‚°ë©´ ì£¼ë¯¼í™”í•©ì²´ìœ¡ëŒ€íšŒ', date: '2025. 8. 15.', visitors: '1,000ëª… ì´ìƒ', reason: 'ì˜¤ëœ ì—­ì‚¬ë¥¼ ê°€ì§„ ëŒ€ê·œëª¨ ì§€ì—­ ê³µë™ì²´ í–‰ì‚¬', type: 'ì§€ì—­í–‰ì‚¬' },
                { region: 'ì˜ë™êµ°', name: 'ì˜ë™í¬ë„ì¶•ì œ', date: '2025. 9. 18. ~ 9. 21.', visitors: '22ë§Œ+', reason: 'ì¶©ë¶ë„ ì§€ì • ìœ ë§ì¶•ì œ, ê³¼ê±° ë°©ë¬¸ê° ìˆ˜ ì••ë„ì  ì´ˆê³¼', type: 'ì¶•ì œ' },
                { region: 'ì˜ë™êµ°', name: 'ì œ8íšŒ ëŒ€í•œë¯¼êµ­ì¡±êµ¬í˜‘íšŒì¥ê¸° ì‹œë„ëŒ€í•­ ì „êµ­ì¡±êµ¬ëŒ€íšŒ', date: '2025. 9. 20.', visitors: 'ìˆ˜ì²œ ëª… ì´ìƒ', reason: 'ì „êµ­ ê·œëª¨ì˜ ì‹œë„ëŒ€í•­ ìŠ¤í¬ì¸  ëŒ€íšŒ', type: 'ìŠ¤í¬ì¸ ' },
                { region: 'ì§„ì²œêµ°', name: 'ì œ35íšŒ ì¶©ë¶ìƒí™œì²´ìœ¡ëŒ€íšŒ', date: '2025. 9. 13. ~ 9. 14.', visitors: 'ìˆ˜ë§Œ ëª… ì´ìƒ', reason: 'ì¶©ë¶ ì „ì—­ì˜ ì°¸ê°€ìê°€ ëª¨ì´ëŠ” ë„ ë‹¨ìœ„ ëŒ€ê·œëª¨ í–‰ì‚¬', type: 'ìŠ¤í¬ì¸ ' },
                { region: 'ì œì²œì‹œ', name: '2025 ì œì²œêµ­ì œí•œë°©ì²œì—°ë¬¼ì‚°ì—…ì—‘ìŠ¤í¬', date: '2025. 9. 20. ~ 10. 19.', visitors: 'ëª©í‘œ 152ë§Œ', reason: 'í•œ ë‹¬ê°„ ì§„í–‰ë˜ëŠ” ì´ˆëŒ€í˜• êµ­ì œ ì—‘ìŠ¤í¬', type: 'ì—‘ìŠ¤í¬' },
                { region: 'ì²­ì£¼ì‹œ', name: 'ì²­ì£¼ê³µì˜ˆë¹„ì—”ë‚ ë ˆ', date: '2025. 9. 4. ~ 11. 2.', visitors: 'ìˆ˜ì‹­ë§Œ ëª… ì´ìƒ', reason: 'ì—­ëŒ€ ìµœì¥ ê¸°ê°„(60ì¼) ìš´ì˜ë˜ëŠ” ëŒ€ê·œëª¨ êµ­ì œ ë¬¸í™” í–‰ì‚¬', type: 'ì—‘ìŠ¤í¬' },
                { region: 'ì²­ì£¼ì‹œ', name: 'ì²­ì›ìƒëª…ì¶•ì œ', date: '2025. 9. 24. ~ 10. 3.', visitors: 'ìˆ˜ì‹­ë§Œ ëª… ì´ìƒ', reason: 'ì²­ì£¼ì‹œë¥¼ ëŒ€í‘œí•˜ëŠ” ëŒ€ê·œëª¨ ì§€ì—­ ì¶•ì œ', type: 'ì¶•ì œ' },
                { region: 'ì¦í‰êµ°', name: 'ì¦í‰ì¸ì‚¼ê³¨ì¶•ì œ', date: '2025. 10. 3. ~ 10. 6.', visitors: 'ìˆ˜ë§Œ ëª… ì´ìƒ', reason: 'ì¶©ë¶ë„ ì§€ì • ìš°ìˆ˜ì¶•ì œ ë° K-ì»¬ì³ 100ì„  ì„ ì •', type: 'ì¶•ì œ' },
                { region: 'ì˜ë™êµ°', name: 'ì œ22íšŒ ì¶”í’ë ¹ë©´ë¯¼ í™”í•©ì²´ìœ¡ëŒ€íšŒ', date: '2025. 10. 4.', visitors: '1,000ëª… ì´ìƒ', reason: 'ì¥ê¸°ê°„ ê°œìµœëœ ëŒ€ê·œëª¨ ì§€ì—­ ê³µë™ì²´ í–‰ì‚¬', type: 'ì§€ì—­í–‰ì‚¬' },
                { region: 'ë³´ì€êµ°', name: 'ë³´ì€ëŒ€ì¶”ì¶•ì œ', date: '2025. 10. 17. ~ 10. 26.', visitors: '90ë§Œ+', reason: 'ì¶©ë¶ë„ ì§€ì • ìš°ìˆ˜ì¶•ì œ, ê³¼ê±° ë°©ë¬¸ê° ìˆ˜ ì••ë„ì  ì´ˆê³¼', type: 'ì¶•ì œ' },
                { region: 'ì²­ì£¼ì‹œ', name: 'ì„¸ì¢…ëŒ€ì™•ê³¼ ì´ˆì •ì•½ìˆ˜ì¶•ì œ', date: '2025. 10. 17. ~ 10. 19.', visitors: '17ë§Œ+', reason: 'ê³¼ê±° ë°©ë¬¸ê° ìˆ˜ê°€ ì¦ëª…í•˜ëŠ” ëŒ€ê·œëª¨ ëŒ€í‘œ ì¶•ì œ', type: 'ì¶•ì œ' },
                { region: 'ì²­ì£¼ì‹œ', name: '2025 ì¶©ì²­ë¶ë„ë†ì‹í’ˆì‚°ì—…ë°•ëŒíšŒ', date: '2025. 10. 31. ê°œë§‰', visitors: 'ìˆ˜ë§Œ ëª… ì´ìƒ', reason: 'ë„ ì „ì—­ì—ì„œ ì°¸ê°€í•˜ëŠ” ëŒ€ê·œëª¨ ì‚°ì—… ë°•ëŒíšŒ', type: 'ì—‘ìŠ¤í¬' },
                { region: 'ê´´ì‚°êµ°', name: 'ê´´ì‚°ê¹€ì¥ì¶•ì œ', date: '2025. 11. 6. ~ 11. 9.', visitors: '6.6ë§Œ+', reason: 'ì¶©ë¶ë„ ì§€ì • ìµœìš°ìˆ˜ì¶•ì œ, ë°©ë¬¸ê° ìˆ˜ ê¸‰ì¦', type: 'ì¶•ì œ' },
            ];

            let selectedRegion = 'all';
            let selectedMonth = 'all';

            const regions = [...new Set(eventData.map(e => e.region))];
            const months = ['7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];

            const mapContainer = document.getElementById('map-container');
            const timelineContainer = document.getElementById('timeline-container');
            const eventList = document.getElementById('event-list');
            const eventCountSpan = document.getElementById('event-count');
            const noResultsDiv = document.getElementById('no-results');

            function renderFilters() {
                mapContainer.innerHTML = `<div data-region="all" class="map-region text-center p-3 rounded-lg bg-gray-200 active">ì „ì²´</div>` + regions.map(r => 
                    `<div data-region="${r}" class="map-region text-center p-3 rounded-lg bg-gray-200">${r}</div>`
                ).join('');

                timelineContainer.innerHTML = `<div data-month="all" class="timeline-month text-center p-3 rounded-lg bg-gray-200 active">ì „ì²´</div>` + months.map((m, i) => 
                    `<div data-month="${i + 7}" class="timeline-month text-center p-3 rounded-lg bg-gray-200">${m}</div>`
                ).join('');
            }

            function renderEvents() {
                const filteredEvents = eventData.filter(event => {
                    const regionMatch = selectedRegion === 'all' || event.region === selectedRegion;
                    
                    const eventMonthMatch = selectedMonth === 'all' || (() => {
                        const dateString = event.date;
                        const eventMonths = [];
                        const match = dateString.match(/(\d{4}\. )?(\d{1,2})\. (\d{1,2})\./);
                        if (dateString.includes('~')) {
                            const parts = dateString.split('~').map(s => s.trim());
                            const startMatch = parts[0].match(/(\d{1,2})\. (\d{1,2})/);
                            const endMatch = parts[1].match(/(\d{1,2})\. (\d{1,2})/);
                            if(startMatch && endMatch) {
                                const startMonth = parseInt(startMatch[1]);
                                const endMonth = parseInt(endMatch[1]);
                                for(let i = startMonth; i <= endMonth; i++) {
                                    eventMonths.push(i);
                                }
                            }
                        } else if (match) {
                            eventMonths.push(parseInt(match[2]));
                        }
                        return eventMonths.includes(parseInt(selectedMonth));
                    })();

                    return regionMatch && eventMonthMatch;
                });

                eventList.innerHTML = '';
                if (filteredEvents.length === 0) {
                    noResultsDiv.classList.remove('hidden');
                } else {
                    noResultsDiv.classList.add('hidden');
                    filteredEvents.forEach(event => {
                        const card = `
                            <div class="event-card bg-white rounded-lg shadow-md overflow-hidden p-5 flex flex-col">
                                <h3 class="font-bold text-xl mb-2 text-blue-800">${event.name}</h3>
                                <div class="text-gray-600 mb-4 space-y-1">
                                    <p><span class="font-bold">ğŸ“ ì§€ì—­:</span> ${event.region}</p>
                                    <p><span class="font-bold">ğŸ“… ë‚ ì§œ:</span> ${event.date}</p>
                                    <p><span class="font-bold">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ë°©ë¬¸ê°:</span> ${event.visitors}</p>
                                </div>
                                <div class="mt-auto bg-blue-50 p-3 rounded-md">
                                    <p class="text-sm text-blue-700"><span class="font-bold">ğŸ“‹ í¬í•¨ ê·¼ê±°:</span> ${event.reason}</p>
                                </div>
                            </div>
                        `;
                        eventList.innerHTML += card;
                    });
                }
                eventCountSpan.textContent = filteredEvents.length;
            }
            
            function setupEventListeners() {
                mapContainer.addEventListener('click', e => {
                    if (e.target.classList.contains('map-region')) {
                        mapContainer.querySelector('.active').classList.remove('active');
                        e.target.classList.add('active');
                        selectedRegion = e.target.dataset.region;
                        renderEvents();
                    }
                });

                timelineContainer.addEventListener('click', e => {
                    if (e.target.classList.contains('timeline-month')) {
                        timelineContainer.querySelector('.active').classList.remove('active');
                        e.target.classList.add('active');
                        selectedMonth = e.target.dataset.month;
                        renderEvents();
                    }
                });
                
                document.querySelectorAll('.accordion-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const content = header.nextElementSibling;
                        const icon = header.querySelector('span');
                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                            icon.style.transform = 'rotate(0deg)';
                        } else {
                            document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                            document.querySelectorAll('.accordion-header span').forEach(i => i.style.transform = 'rotate(0deg)');
                            content.style.maxHeight = content.scrollHeight + "px";
                            icon.style.transform = 'rotate(180deg)';
                        }
                    });
                });
            }

            function renderKPIs() {
                document.getElementById('kpi-total-events').innerHTML = `
                    <p class="text-sm text-gray-500 mb-1">ì´ ì˜ë¬´ ëŒ€ìƒ í–‰ì‚¬</p>
                    <p class="text-4xl font-bold text-blue-600">${eventData.length}</p>`;
                
                document.getElementById('kpi-total-cities').innerHTML = `
                    <p class="text-sm text-gray-500 mb-1">ê´€ë ¨ ì‹œ/êµ°</p>
                    <p class="text-4xl font-bold text-teal-600">${regions.length}</p>`;

                const largestEvent = { name: 'ì œì²œêµ­ì œí•œë°©ì—‘ìŠ¤í¬', visitors: '152ë§Œëª…' };
                 document.getElementById('kpi-largest-event').innerHTML = `
                    <p class="text-sm text-gray-500 mb-1">ìµœëŒ€ ê·œëª¨ í–‰ì‚¬(ëª©í‘œ)</p>
                    <p class="text-2xl font-bold text-purple-600">${largestEvent.name}</p>
                    <p class="text-lg font-medium text-purple-500">${largestEvent.visitors}</p>`;

                const monthCounts = months.map((m, i) => {
                    return eventData.filter(event => {
                        const dateString = event.date;
                        if(dateString.includes(`${i + 7}.`)) return true;
                        if (dateString.includes('~')) {
                            const parts = dateString.split('~').map(s => s.trim());
                            const startMatch = parts[0].match(/(\d{1,2})\. (\d{1,2})/);
                            const endMatch = parts[1].match(/(\d{1,2})\. (\d{1,2})/);
                            if(startMatch && endMatch) {
                                const startMonth = parseInt(startMatch[1]);
                                const endMonth = parseInt(endMatch[1]);
                                return (i+7 >= startMonth && i+7 <= endMonth);
                            }
                        }
                        return false;
                    }).length;
                });
                const maxEvents = Math.max(...monthCounts);
                const busiestMonthIndex = monthCounts.indexOf(maxEvents);
                const busiestMonth = months[busiestMonthIndex];

                document.getElementById('kpi-busiest-month').innerHTML = `
                    <p class="text-sm text-gray-500 mb-1">ê°€ì¥ ë°”ìœ ë‹¬</p>
                    <p class="text-4xl font-bold text-orange-600">${busiestMonth}</p>
                    <p class="text-lg font-medium text-orange-500">(${maxEvents}ê°œ í–‰ì‚¬)</p>`;
            }

            function renderCharts() {
                const cityCounts = regions.map(r => eventData.filter(e => e.region === r).length);
                const eventTypes = [...new Set(eventData.map(e => e.type))];
                const typeCounts = eventTypes.map(t => eventData.filter(e => e.type === t).length);
                const monthCounts = months.map((m, i) => eventData.filter(event => {
                     const dateString = event.date;
                        const eventMonths = [];
                        const match = dateString.match(/(\d{4}\. )?(\d{1,2})\. (\d{1,2})\./);
                        if (dateString.includes('~')) {
                            const parts = dateString.split('~').map(s => s.trim());
                            const startMatch = parts[0].match(/(\d{1,2})\. (\d{1,2})/);
                            const endMatch = parts[1].match(/(\d{1,2})\. (\d{1,2})/);
                            if(startMatch && endMatch) {
                                const startMonth = parseInt(startMatch[1]);
                                const endMonth = parseInt(endMatch[1]);
                                for(let j = startMonth; j <= endMonth; j++) {
                                    eventMonths.push(j);
                                }
                            }
                        } else if (match) {
                            eventMonths.push(parseInt(match[2]));
                        }
                        return eventMonths.includes(i + 7);
                }).length);

                const baseColors = ['#60A5FA', '#34D399', '#FBBF24', '#F87171', '#A78BFA', '#818CF8', '#FB923C'];
                const bgColors = (count) => Array.from({length: count}, (_, i) => baseColors[i % baseColors.length]);
                
                new Chart(document.getElementById('eventsByCityChart'), {
                    type: 'bar',
                    data: { labels: regions, datasets: [{ label: 'í–‰ì‚¬ ìˆ˜', data: cityCounts, backgroundColor: bgColors(regions.length) }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } } }
                });

                new Chart(document.getElementById('eventsByMonthChart'), {
                    type: 'bar',
                    data: { labels: months, datasets: [{ label: 'í–‰ì‚¬ ìˆ˜', data: monthCounts, backgroundColor: bgColors(months.length) }] },
                    options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, ticks: { stepSize: 1 } } } }
                });

                new Chart(document.getElementById('eventsByTypeChart'), {
                    type: 'doughnut',
                    data: { labels: eventTypes, datasets: [{ label: 'í–‰ì‚¬ ìœ í˜•', data: typeCounts, backgroundColor: bgColors(eventTypes.length) }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } } }
                });
            }

            renderFilters();
            renderEvents();
            setupEventListeners();
            renderKPIs();
            renderCharts();
        });
    </script>
</body>
</html>
