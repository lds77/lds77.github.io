<!DOCTYPE html>
<html lang="{{ site.lang | default: 'ko' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 동적 타이틀 생성 -->
    <title>
        {% if page.title %}{{ page.title }} | {{ site.title }}
        {% else %}{{ site.title }}
        {% endif %}
    </title>
    
    <!-- 동적 메타 설명 -->
    <meta name="description" content="
        {% if page.description %}{{ page.description }}
        {% else %}{{ site.description }}
        {% endif %}
    ">
    
    <!-- 동적 키워드 생성 -->
    <meta name="keywords" content="
        {% if page.keywords %}{{ page.keywords | join: ', ' }}
        {% else %}{{ site.keywords | join: ', ' }}
        {% endif %}
    ">
    
    <meta name="author" content="{{ site.author }}">
    
    <!-- 네이버 검색엔진 최적화 -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    
    <!-- 사이트 인증 코드 (config에서 자동 적용) -->
    {% if site.naver_site_verification %}
    <meta name="naver-site-verification" content="{{ site.naver_site_verification }}">
    {% endif %}
    
    {% if site.google_site_verification %}
    <meta name="google-site-verification" content="{{ site.google_site_verification }}">
    {% endif %}
    
    <!-- 지역 SEO (config에서 자동 적용) -->
    <meta name="geo.region" content="KR-{{ site.location.region }}">
    <meta name="geo.placename" content="{{ site.location.city }}">
    <meta name="geo.position" content="{{ site.location.latitude }};{{ site.location.longitude }}">
    <meta name="ICBM" content="{{ site.location.latitude }}, {{ site.location.longitude }}">
    
    <!-- 비즈니스 정보 (config에서 자동 적용) -->
    <meta name="business-hours" content="{{ site.business.hours }}">
    <meta name="business-phone" content="{{ site.business.phone }}">
    <meta name="business-category" content="의료서비스,구급차서비스,응급의료">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="
        {% if page.title %}{{ page.title }} | {{ site.title }}
        {% else %}{{ site.title }}
        {% endif %}
    ">
    <meta property="og:description" content="
        {% if page.description %}{{ page.description }}
        {% else %}{{ site.description }}
        {% endif %}
    ">
    <meta property="og:site_name" content="{{ site.business.name }}">
    <meta property="og:image" content="{{ site.url }}/images/ambulance-service.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{{ site.business.name }} {{ site.business.hours }} 서비스">
    
    <!-- Twitter Card -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ site.url }}{{ page.url }}">
    <meta property="twitter:title" content="
        {% if page.title %}{{ page.title }} | {{ site.title }}
        {% else %}{{ site.title }}
        {% endif %}
    ">
    <meta property="twitter:description" content="
        {% if page.description %}{{ page.description }}
        {% else %}{{ site.description }}
        {% endif %}
    ">
    <meta property="twitter:image" content="{{ site.url }}/images/ambulance-service.jpg">
    <meta property="twitter:image:alt" content="{{ site.business.name }} {{ site.business.hours }} 서비스">
    
    <!-- 구조화 데이터 (config에서 자동 생성) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": ["{{ site.structured_data.type }}", "LocalBusiness", "EmergencyService"],
        "name": "{{ site.business.name }}",
        "alternateName": ["{{ site.location.city }}구급차", "{{ site.location.city }}사설구급차", "{{ site.business.name }}"],
        "description": "{{ site.description }}",
        "url": "{{ site.url }}",
        "telephone": "{{ site.business.phone }}",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "{{ site.location.city }}",
            "addressRegion": "{{ site.location.region }}",
            "addressCountry": "{{ site.location.country }}",
            "areaServed": {{ site.structured_data.service_areas | jsonify }}
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": "{{ site.location.latitude }}",
            "longitude": "{{ site.location.longitude }}"
        },
        "openingHours": "{{ site.structured_data.opening_hours }}",
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            "opens": "00:00",
            "closes": "23:59"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "{{ site.business.phone }}",
            "contactType": "{{ site.seo.contact_type }}",
            "availableLanguage": "Korean",
            "areaServed": "{{ site.seo.area_served }}",
            "hoursAvailable": {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                "opens": "00:00",
                "closes": "23:59"
            }
        },
        "founder": {
            "@type": "Person",
            "name": "{{ site.business.manager }}",
            "telephone": "{{ site.business.phone }}"
        },
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "{{ site.location.city }}구급차 서비스 목록",
            "itemListElement": [
                {% for service in site.structured_data.service_types %}
                {
                    "@type": "Offer",
                    "name": "{{ service.name }}",
                    "description": "{{ site.location.city }} 지역 {{ service.name }} 서비스",
                    "url": "{{ site.url }}{{ service.url }}",
                    "areaServed": "{{ site.location.region }} 전체",
                    "availability": "https://schema.org/InStock"
                }{% unless forloop.last %},{% endunless %}
                {% endfor %}
            ]
        },
        "serviceArea": {
            "@type": "GeoCircle",
            "geoMidpoint": {
                "@type": "GeoCoordinates",
                "latitude": "{{ site.location.latitude }}",
                "longitude": "{{ site.location.longitude }}"
            },
            "geoRadius": "50000"
        },
        "keywords": "{{ site.keywords | join: ', ' }}",
        "priceRange": "{{ site.structured_data.price_range }}",
        "paymentAccepted": ["현금", "카드", "계좌이체"],
        "currenciesAccepted": "KRW"
    }
    </script>
    
    <!-- 캐노니컬 URL -->
    <link rel="canonical" href="{{ site.url }}{{ page.url }}">
    
    <!-- 파비콘 -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Google Analytics (config에서 자동 적용) -->
    {% if site.google_analytics %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
    </script>
    {% endif %}
    
    <!-- CSS 파일 포함 -->
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>

<body>
    <!-- 헤더 -->
    <header>
        <div class="container">
            <div class="header-content">
                <h1>{{ site.location.city }}구급차 전문 서비스</h1>
                <p class="header-subtitle">{{ site.business.hours }} 안전한 환자이송과 응급의료 가이드</p>
                <span class="brand-tag">{{ site.business.name }}</span>
            </div>
        </div>
    </header>

    <!-- 메인 콘텐츠 -->
    <main itemscope itemtype="https://schema.org/WebPage">
        <div class="container">
            {{ content }}
        </div>
    </main>

    <!-- 푸터 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; {{ 'now' | date: "%Y" }} {{ site.business.name }}. {{ site.location.city }}구급차 전문 서비스.</p>
                <p>의료 정보는 참고용이며, 응급상황 시 전문의료진의 진료를 받으시기 바랍니다.</p>
                <p>대표: {{ site.business.manager }} | 연락처: {{ site.business.phone }}</p>
            </div>
        </div>
    </footer>

    <!-- 고정 홈 버튼 -->
    <a href="{{ site.baseurl }}/" class="fixed-home-btn">
        🏠 홈으로
    </a>

    <!-- JavaScript -->
    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>
</body>
</html>
